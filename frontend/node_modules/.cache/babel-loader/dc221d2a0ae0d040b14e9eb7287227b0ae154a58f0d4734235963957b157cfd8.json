{"ast":null,"code":"// services/userService.js\nconst API_BASE_URL = 'http://localhost:5001/api';\n\n// Get token and create headers\nconst getAuthHeaders = () => {\n  const token = localStorage.getItem('accessToken');\n  if (!token) {\n    console.error('No access token found in localStorage');\n    throw new Error('No access token found. Please login again.');\n  }\n  return {\n    'Content-Type': 'application/json',\n    'Authorization': `Bearer ${token}`\n  };\n};\nexport const userService = {\n  fetchUsers: async () => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/users`, {\n        method: 'GET',\n        headers: getAuthHeaders()\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      return {\n        success: true,\n        data\n      };\n    } catch (error) {\n      console.error('Fetch users error:', error);\n      return {\n        success: false,\n        error: error.message || 'Failed to fetch users'\n      };\n    }\n  },\n  createUser: async userData => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/users`, {\n        method: 'POST',\n        headers: getAuthHeaders(),\n        body: JSON.stringify(userData)\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      return {\n        success: true,\n        data\n      };\n    } catch (error) {\n      console.error('Create user error:', error);\n      return {\n        success: false,\n        error: error.message || 'Failed to create user'\n      };\n    }\n  },\n  updateUser: async (userId, userData) => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/users/${userId}`, {\n        method: 'PUT',\n        headers: getAuthHeaders(),\n        body: JSON.stringify(userData)\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      return {\n        success: true,\n        data\n      };\n    } catch (error) {\n      console.error('Update user error:', error);\n      return {\n        success: false,\n        error: error.message || 'Failed to update user'\n      };\n    }\n  },\n  deleteUser: async userId => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/users/${userId}`, {\n        method: 'DELETE',\n        headers: getAuthHeaders()\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      return {\n        success: true,\n        data\n      };\n    } catch (error) {\n      console.error('Delete user error:', error);\n      return {\n        success: false,\n        error: error.message || 'Failed to delete user'\n      };\n    }\n  },\n  toggleUserStatus: async (userId, currentStatus) => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/users/${userId}/status`, {\n        method: 'PATCH',\n        headers: getAuthHeaders(),\n        body: JSON.stringify({\n          status: currentStatus === 'Active' ? 'Inactive' : 'Active'\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      return {\n        success: true,\n        data\n      };\n    } catch (error) {\n      console.error('Toggle status error:', error);\n      return {\n        success: false,\n        error: error.message || 'Failed to update user status'\n      };\n    }\n  }\n};","map":{"version":3,"names":["API_BASE_URL","getAuthHeaders","token","localStorage","getItem","console","error","Error","userService","fetchUsers","response","fetch","method","headers","ok","status","data","json","success","message","createUser","userData","body","JSON","stringify","updateUser","userId","deleteUser","toggleUserStatus","currentStatus"],"sources":["/Volumes/Macbook-1/GITAM/5th_sem/WADSF/project/Mini project/smart-classroom/frontend/src/services/userService.js"],"sourcesContent":["// services/userService.js\nconst API_BASE_URL = 'http://localhost:5001/api';\n\n// Get token and create headers\nconst getAuthHeaders = () => {\n  const token = localStorage.getItem('accessToken');\n  \n  if (!token) {\n    console.error('No access token found in localStorage');\n    throw new Error('No access token found. Please login again.');\n  }\n\n  return {\n    'Content-Type': 'application/json',\n    'Authorization': `Bearer ${token}`\n  };\n};\n\nexport const userService = {\n  fetchUsers: async () => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/users`, {\n        method: 'GET',\n        headers: getAuthHeaders()\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      return { success: true, data };\n    } catch (error) {\n      console.error('Fetch users error:', error);\n      return { \n        success: false, \n        error: error.message || 'Failed to fetch users' \n      };\n    }\n  },\n\n  createUser: async (userData) => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/users`, {\n        method: 'POST',\n        headers: getAuthHeaders(),\n        body: JSON.stringify(userData)\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      return { success: true, data };\n    } catch (error) {\n      console.error('Create user error:', error);\n      return { \n        success: false, \n        error: error.message || 'Failed to create user' \n      };\n    }\n  },\n\n  updateUser: async (userId, userData) => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/users/${userId}`, {\n        method: 'PUT',\n        headers: getAuthHeaders(),\n        body: JSON.stringify(userData)\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      return { success: true, data };\n    } catch (error) {\n      console.error('Update user error:', error);\n      return { \n        success: false, \n        error: error.message || 'Failed to update user' \n      };\n    }\n  },\n\n  deleteUser: async (userId) => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/users/${userId}`, {\n        method: 'DELETE',\n        headers: getAuthHeaders()\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      return { success: true, data };\n    } catch (error) {\n      console.error('Delete user error:', error);\n      return { \n        success: false, \n        error: error.message || 'Failed to delete user' \n      };\n    }\n  },\n\n  toggleUserStatus: async (userId, currentStatus) => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/users/${userId}/status`, {\n        method: 'PATCH',\n        headers: getAuthHeaders(),\n        body: JSON.stringify({\n          status: currentStatus === 'Active' ? 'Inactive' : 'Active'\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      return { success: true, data };\n    } catch (error) {\n      console.error('Toggle status error:', error);\n      return { \n        success: false, \n        error: error.message || 'Failed to update user status' \n      };\n    }\n  }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}