{"ast":null,"code":"var _jsxFileName = \"/Volumes/Macbook-1/GITAM/5th_sem/WADSF/project/Mini project/smart-classroom/frontend/src/pages/AdminPortal.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// All your imports remain the same...\n\n// Update apiService token retrieval\nconst apiService = {\n  request: async (endpoint, options = {}) => {\n    const token = localStorage.getItem('accessToken'); // fixed token key\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        ...(token && {\n          'Authorization': `Bearer ${token}`\n        }),\n        ...options.headers\n      },\n      ...options\n    };\n    if (config.body && typeof config.body === 'object') {\n      config.body = JSON.stringify(config.body);\n    }\n    try {\n      const response = await fetch(`${API_BASE_URL}${endpoint}`, config);\n      const data = await response.json().catch(() => ({}));\n      if (!response.ok) {\n        const err = new Error(data.message || `HTTP error! status: ${response.status}`);\n        err.status = response.status;\n        throw err;\n      }\n      return data;\n    } catch (error) {\n      console.error('API request failed:', error);\n      throw error;\n    }\n  },\n  getUsers: async () => apiService.request('/users'),\n  createUser: async userData => apiService.request('/users', {\n    method: 'POST',\n    body: userData\n  }),\n  updateUser: async (userId, userData) => apiService.request(`/users/${userId}`, {\n    method: 'PUT',\n    body: userData\n  }),\n  deleteUser: async userId => apiService.request(`/users/${userId}`, {\n    method: 'DELETE'\n  }),\n  getCourses: async () => apiService.request('/courses'),\n  createCourse: async courseData => apiService.request('/courses', {\n    method: 'POST',\n    body: courseData\n  }),\n  updateCourse: async (courseId, courseData) => apiService.request(`/courses/${courseId}`, {\n    method: 'PUT',\n    body: courseData\n  }),\n  deleteCourse: async courseId => apiService.request(`/courses/${courseId}`, {\n    method: 'DELETE'\n  }),\n  getClassrooms: async () => apiService.request('/classrooms'),\n  createClassroom: async classroomData => apiService.request('/classrooms', {\n    method: 'POST',\n    body: classroomData\n  }),\n  deleteClassroom: async classroomId => apiService.request(`/classrooms/${classroomId}`, {\n    method: 'DELETE'\n  }),\n  getSystemStats: async () => apiService.request('/system/stats'),\n  generateTimetable: async timetableData => apiService.request('/timetable/generate', {\n    method: 'POST',\n    body: timetableData\n  }),\n  mapCourseToFaculty: async mappingData => apiService.request('/courses/map-faculty', {\n    method: 'POST',\n    body: mappingData\n  }),\n  getFaculty: async () => apiService.request('/users/faculty')\n};\nconst AdminPortal = ({\n  user,\n  setUser\n}) => {\n  // all your state hooks remain the same...\n\n  // fetchAdminData remains mostly the same, but handle 401 gracefully:\n  const fetchAdminData = async () => {\n    setLoading(true);\n    try {\n      const [usersResp, coursesResp, classroomsResp, statsResp] = await Promise.all([apiService.getUsers(), apiService.getCourses(), apiService.getClassrooms(), apiService.getSystemStats()]);\n      setUsers(usersResp.data || usersResp);\n      setCourses(coursesResp.data || coursesResp);\n      setClassrooms(classroomsResp.data || classroomsResp);\n      setSystemStats(statsResp.data || statsResp);\n      showSnackbar('Data loaded successfully');\n    } catch (error) {\n      console.error('Error fetching data:', error);\n      showSnackbar(error.message || 'Error loading data', 'error');\n      // Only logout if token really missing\n      if (error.status === 401 || error.status === 403) {\n        handleLogout();\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // AddUserDialog usage fixed\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      flexGrow: 1,\n      bgcolor: colorScheme.background,\n      minHeight: '100vh'\n    },\n    children: /*#__PURE__*/_jsxDEV(AddUserDialog, {\n      open: newUserDialog,\n      onClose: () => setNewUserDialog(false),\n      onUserAdded: user => {\n        setUsers(prev => [...prev, user]); // add dynamically\n        setNewUserDialog(false);\n        showSnackbar('User added successfully');\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n};\n_c = AdminPortal;\nexport default AdminPortal;\nvar _c;\n$RefreshReg$(_c, \"AdminPortal\");","map":{"version":3,"names":["apiService","request","endpoint","options","token","localStorage","getItem","config","headers","body","JSON","stringify","response","fetch","API_BASE_URL","data","json","catch","ok","err","Error","message","status","error","console","getUsers","createUser","userData","method","updateUser","userId","deleteUser","getCourses","createCourse","courseData","updateCourse","courseId","deleteCourse","getClassrooms","createClassroom","classroomData","deleteClassroom","classroomId","getSystemStats","generateTimetable","timetableData","mapCourseToFaculty","mappingData","getFaculty","AdminPortal","user","setUser","fetchAdminData","setLoading","usersResp","coursesResp","classroomsResp","statsResp","Promise","all","setUsers","setCourses","setClassrooms","setSystemStats","showSnackbar","handleLogout","_jsxDEV","Box","sx","flexGrow","bgcolor","colorScheme","background","minHeight","children","AddUserDialog","open","newUserDialog","onClose","setNewUserDialog","onUserAdded","prev","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Volumes/Macbook-1/GITAM/5th_sem/WADSF/project/Mini project/smart-classroom/frontend/src/pages/AdminPortal.js"],"sourcesContent":["// All your imports remain the same...\n\n// Update apiService token retrieval\nconst apiService = {\n  request: async (endpoint, options = {}) => {\n    const token = localStorage.getItem('accessToken'); // fixed token key\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        ...(token && { 'Authorization': `Bearer ${token}` }),\n        ...options.headers,\n      },\n      ...options,\n    };\n    if (config.body && typeof config.body === 'object') {\n      config.body = JSON.stringify(config.body);\n    }\n    try {\n      const response = await fetch(`${API_BASE_URL}${endpoint}`, config);\n      const data = await response.json().catch(() => ({}));\n      if (!response.ok) {\n        const err = new Error(data.message || `HTTP error! status: ${response.status}`);\n        err.status = response.status;\n        throw err;\n      }\n      return data;\n    } catch (error) {\n      console.error('API request failed:', error);\n      throw error;\n    }\n  },\n\n  getUsers: async () => apiService.request('/users'),\n  createUser: async (userData) => apiService.request('/users', { method: 'POST', body: userData }),\n  updateUser: async (userId, userData) => apiService.request(`/users/${userId}`, { method: 'PUT', body: userData }),\n  deleteUser: async (userId) => apiService.request(`/users/${userId}`, { method: 'DELETE' }),\n  getCourses: async () => apiService.request('/courses'),\n  createCourse: async (courseData) => apiService.request('/courses', { method: 'POST', body: courseData }),\n  updateCourse: async (courseId, courseData) => apiService.request(`/courses/${courseId}`, { method: 'PUT', body: courseData }),\n  deleteCourse: async (courseId) => apiService.request(`/courses/${courseId}`, { method: 'DELETE' }),\n  getClassrooms: async () => apiService.request('/classrooms'),\n  createClassroom: async (classroomData) => apiService.request('/classrooms', { method: 'POST', body: classroomData }),\n  deleteClassroom: async (classroomId) => apiService.request(`/classrooms/${classroomId}`, { method: 'DELETE' }),\n  getSystemStats: async () => apiService.request('/system/stats'),\n  generateTimetable: async (timetableData) => apiService.request('/timetable/generate', { method: 'POST', body: timetableData }),\n  mapCourseToFaculty: async (mappingData) => apiService.request('/courses/map-faculty', { method: 'POST', body: mappingData }),\n  getFaculty: async () => apiService.request('/users/faculty')\n};\n\nconst AdminPortal = ({ user, setUser }) => {\n  // all your state hooks remain the same...\n\n  // fetchAdminData remains mostly the same, but handle 401 gracefully:\n  const fetchAdminData = async () => {\n    setLoading(true);\n    try {\n      const [usersResp, coursesResp, classroomsResp, statsResp] = await Promise.all([\n        apiService.getUsers(),\n        apiService.getCourses(),\n        apiService.getClassrooms(),\n        apiService.getSystemStats()\n      ]);\n      setUsers(usersResp.data || usersResp);\n      setCourses(coursesResp.data || coursesResp);\n      setClassrooms(classroomsResp.data || classroomsResp);\n      setSystemStats(statsResp.data || statsResp);\n      showSnackbar('Data loaded successfully');\n    } catch (error) {\n      console.error('Error fetching data:', error);\n      showSnackbar(error.message || 'Error loading data', 'error');\n      // Only logout if token really missing\n      if (error.status === 401 || error.status === 403) {\n        handleLogout();\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // AddUserDialog usage fixed\n  return (\n    <Box sx={{ flexGrow: 1, bgcolor: colorScheme.background, minHeight: '100vh' }}>\n      {/* Header, Tabs, etc. remain the same */}\n\n      <AddUserDialog \n        open={newUserDialog} \n        onClose={() => setNewUserDialog(false)} \n        onUserAdded={(user) => {\n          setUsers(prev => [...prev, user]); // add dynamically\n          setNewUserDialog(false);\n          showSnackbar('User added successfully');\n        }}\n      />\n\n      {/* Other dialogs remain the same */}\n    </Box>\n  );\n};\n\nexport default AdminPortal;"],"mappings":";;AAAA;;AAEA;AACA,MAAMA,UAAU,GAAG;EACjBC,OAAO,EAAE,MAAAA,CAAOC,QAAQ,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;IACzC,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC;IACnD,MAAMC,MAAM,GAAG;MACbC,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClC,IAAIJ,KAAK,IAAI;UAAE,eAAe,EAAE,UAAUA,KAAK;QAAG,CAAC,CAAC;QACpD,GAAGD,OAAO,CAACK;MACb,CAAC;MACD,GAAGL;IACL,CAAC;IACD,IAAII,MAAM,CAACE,IAAI,IAAI,OAAOF,MAAM,CAACE,IAAI,KAAK,QAAQ,EAAE;MAClDF,MAAM,CAACE,IAAI,GAAGC,IAAI,CAACC,SAAS,CAACJ,MAAM,CAACE,IAAI,CAAC;IAC3C;IACA,IAAI;MACF,MAAMG,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGC,YAAY,GAAGZ,QAAQ,EAAE,EAAEK,MAAM,CAAC;MAClE,MAAMQ,IAAI,GAAG,MAAMH,QAAQ,CAACI,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;MACpD,IAAI,CAACL,QAAQ,CAACM,EAAE,EAAE;QAChB,MAAMC,GAAG,GAAG,IAAIC,KAAK,CAACL,IAAI,CAACM,OAAO,IAAI,uBAAuBT,QAAQ,CAACU,MAAM,EAAE,CAAC;QAC/EH,GAAG,CAACG,MAAM,GAAGV,QAAQ,CAACU,MAAM;QAC5B,MAAMH,GAAG;MACX;MACA,OAAOJ,IAAI;IACb,CAAC,CAAC,OAAOQ,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;MAC3C,MAAMA,KAAK;IACb;EACF,CAAC;EAEDE,QAAQ,EAAE,MAAAA,CAAA,KAAYzB,UAAU,CAACC,OAAO,CAAC,QAAQ,CAAC;EAClDyB,UAAU,EAAE,MAAOC,QAAQ,IAAK3B,UAAU,CAACC,OAAO,CAAC,QAAQ,EAAE;IAAE2B,MAAM,EAAE,MAAM;IAAEnB,IAAI,EAAEkB;EAAS,CAAC,CAAC;EAChGE,UAAU,EAAE,MAAAA,CAAOC,MAAM,EAAEH,QAAQ,KAAK3B,UAAU,CAACC,OAAO,CAAC,UAAU6B,MAAM,EAAE,EAAE;IAAEF,MAAM,EAAE,KAAK;IAAEnB,IAAI,EAAEkB;EAAS,CAAC,CAAC;EACjHI,UAAU,EAAE,MAAOD,MAAM,IAAK9B,UAAU,CAACC,OAAO,CAAC,UAAU6B,MAAM,EAAE,EAAE;IAAEF,MAAM,EAAE;EAAS,CAAC,CAAC;EAC1FI,UAAU,EAAE,MAAAA,CAAA,KAAYhC,UAAU,CAACC,OAAO,CAAC,UAAU,CAAC;EACtDgC,YAAY,EAAE,MAAOC,UAAU,IAAKlC,UAAU,CAACC,OAAO,CAAC,UAAU,EAAE;IAAE2B,MAAM,EAAE,MAAM;IAAEnB,IAAI,EAAEyB;EAAW,CAAC,CAAC;EACxGC,YAAY,EAAE,MAAAA,CAAOC,QAAQ,EAAEF,UAAU,KAAKlC,UAAU,CAACC,OAAO,CAAC,YAAYmC,QAAQ,EAAE,EAAE;IAAER,MAAM,EAAE,KAAK;IAAEnB,IAAI,EAAEyB;EAAW,CAAC,CAAC;EAC7HG,YAAY,EAAE,MAAOD,QAAQ,IAAKpC,UAAU,CAACC,OAAO,CAAC,YAAYmC,QAAQ,EAAE,EAAE;IAAER,MAAM,EAAE;EAAS,CAAC,CAAC;EAClGU,aAAa,EAAE,MAAAA,CAAA,KAAYtC,UAAU,CAACC,OAAO,CAAC,aAAa,CAAC;EAC5DsC,eAAe,EAAE,MAAOC,aAAa,IAAKxC,UAAU,CAACC,OAAO,CAAC,aAAa,EAAE;IAAE2B,MAAM,EAAE,MAAM;IAAEnB,IAAI,EAAE+B;EAAc,CAAC,CAAC;EACpHC,eAAe,EAAE,MAAOC,WAAW,IAAK1C,UAAU,CAACC,OAAO,CAAC,eAAeyC,WAAW,EAAE,EAAE;IAAEd,MAAM,EAAE;EAAS,CAAC,CAAC;EAC9Ge,cAAc,EAAE,MAAAA,CAAA,KAAY3C,UAAU,CAACC,OAAO,CAAC,eAAe,CAAC;EAC/D2C,iBAAiB,EAAE,MAAOC,aAAa,IAAK7C,UAAU,CAACC,OAAO,CAAC,qBAAqB,EAAE;IAAE2B,MAAM,EAAE,MAAM;IAAEnB,IAAI,EAAEoC;EAAc,CAAC,CAAC;EAC9HC,kBAAkB,EAAE,MAAOC,WAAW,IAAK/C,UAAU,CAACC,OAAO,CAAC,sBAAsB,EAAE;IAAE2B,MAAM,EAAE,MAAM;IAAEnB,IAAI,EAAEsC;EAAY,CAAC,CAAC;EAC5HC,UAAU,EAAE,MAAAA,CAAA,KAAYhD,UAAU,CAACC,OAAO,CAAC,gBAAgB;AAC7D,CAAC;AAED,MAAMgD,WAAW,GAAGA,CAAC;EAAEC,IAAI;EAAEC;AAAQ,CAAC,KAAK;EACzC;;EAEA;EACA,MAAMC,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjCC,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACF,MAAM,CAACC,SAAS,EAAEC,WAAW,EAAEC,cAAc,EAAEC,SAAS,CAAC,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CAC5E3D,UAAU,CAACyB,QAAQ,CAAC,CAAC,EACrBzB,UAAU,CAACgC,UAAU,CAAC,CAAC,EACvBhC,UAAU,CAACsC,aAAa,CAAC,CAAC,EAC1BtC,UAAU,CAAC2C,cAAc,CAAC,CAAC,CAC5B,CAAC;MACFiB,QAAQ,CAACN,SAAS,CAACvC,IAAI,IAAIuC,SAAS,CAAC;MACrCO,UAAU,CAACN,WAAW,CAACxC,IAAI,IAAIwC,WAAW,CAAC;MAC3CO,aAAa,CAACN,cAAc,CAACzC,IAAI,IAAIyC,cAAc,CAAC;MACpDO,cAAc,CAACN,SAAS,CAAC1C,IAAI,IAAI0C,SAAS,CAAC;MAC3CO,YAAY,CAAC,0BAA0B,CAAC;IAC1C,CAAC,CAAC,OAAOzC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC5CyC,YAAY,CAACzC,KAAK,CAACF,OAAO,IAAI,oBAAoB,EAAE,OAAO,CAAC;MAC5D;MACA,IAAIE,KAAK,CAACD,MAAM,KAAK,GAAG,IAAIC,KAAK,CAACD,MAAM,KAAK,GAAG,EAAE;QAChD2C,YAAY,CAAC,CAAC;MAChB;IACF,CAAC,SAAS;MACRZ,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;;EAED;EACA,oBACEa,OAAA,CAACC,GAAG;IAACC,EAAE,EAAE;MAAEC,QAAQ,EAAE,CAAC;MAAEC,OAAO,EAAEC,WAAW,CAACC,UAAU;MAAEC,SAAS,EAAE;IAAQ,CAAE;IAAAC,QAAA,eAG5ER,OAAA,CAACS,aAAa;MACZC,IAAI,EAAEC,aAAc;MACpBC,OAAO,EAAEA,CAAA,KAAMC,gBAAgB,CAAC,KAAK,CAAE;MACvCC,WAAW,EAAG9B,IAAI,IAAK;QACrBU,QAAQ,CAACqB,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE/B,IAAI,CAAC,CAAC,CAAC,CAAC;QACnC6B,gBAAgB,CAAC,KAAK,CAAC;QACvBf,YAAY,CAAC,yBAAyB,CAAC;MACzC;IAAE;MAAAkB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAGC,CAAC;AAEV,CAAC;AAACC,EAAA,GAhDIrC,WAAW;AAkDjB,eAAeA,WAAW;AAAC,IAAAqC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}